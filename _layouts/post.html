<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
  <!-- 
    ======================================================================
    KONFIGURASI DASAR & METADATA
    ======================================================================
    Bagian ini berisi konfigurasi dasar, viewport untuk responsivitas,
    dan tag SEO otomatis dari plugin 'jekyll-seo-tag' untuk optimasi.
  -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  {% seo %}

  <!-- 
    ======================================================================
    ASET EKSTERNAL (IKON, FONT, LIBRARY)
    ======================================================================
    Memuat semua sumber daya eksternal yang dibutuhkan oleh halaman,
    termasuk favicon, Tailwind CSS, Google Fonts, dan Lucide Icons.
  -->
  <link rel="icon" type="image/png" href="{{ '/assets/images/favicon.png' | relative_url }}">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- 
    ======================================================================
    STYLE KUSTOM
    ======================================================================
    CSS kustom untuk memberikan gaya unik pada elemen-elemen tertentu.
    Termasuk styling untuk konten artikel (.prose) agar format Markdown
    tampil dengan benar dan indah.
  -->
  <style>
    /* Pengaturan font dasar dan anti-aliasing untuk kehalusan teks */
    body { font-family: 'Inter', sans-serif; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
    /* Gradient untuk header dan footer */
    .cta-gradient { background: linear-gradient(90deg, #0973D6, #2918A9); }
    /* Animasi spinner untuk preloader */
    .spinner { width: 56px; height: 56px; border: 8px solid rgba(255, 255, 255, .3); border-top-color: #FFCB05; border-radius: 50%; animation: spin 1s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* --- STYLING KONTEN ARTIKEL (.prose) --- */
    /* Ini adalah bagian kunci untuk memperbaiki tampilan Markdown dari Jekyll. */
    .prose h2 { margin-top: 2em; margin-bottom: 1em; font-size: 1.5em; font-weight: 700; }
    .prose h3 { margin-top: 1.6em; margin-bottom: 0.8em; font-size: 1.25em; font-weight: 600; }
    .prose p { text-align: justify; margin-bottom: 1.25em; }
    .prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1.25em; }
    .prose ul { list-style-type: disc; }
    .prose ol { list-style-type: decimal; }
    .prose li { margin-bottom: 0.5em; }
    .prose li > ul, .prose li > ol { margin-top: 0.5em; }
    .prose a { color: #0973D6; text-decoration: underline; font-weight: 500; }
    .prose a:hover { color: #2918A9; }
    .prose blockquote { border-left: 4px solid #0973D6; font-style: italic; color: #4a5568; padding-left: 1rem; margin-left: 0; }
    .prose cite { display: block; text-align: right; font-size: .8em; margin-top: .5em; font-style: normal; }
    .prose code { background-color: #f3f4f6; color: #4b5563; padding: 0.2em 0.4em; border-radius: 4px; font-size: 0.9em; }
    .prose pre { background-color: #1f2937; color: #d1d5db; padding: 1em; border-radius: 8px; overflow-x: auto; }
    .prose pre code { background-color: transparent; padding: 0; }
  </style>
</head>
<body class="bg-white text-gray-800">

  <!-- ===== PRELOADER ===== -->
  <!-- Tampilan loading saat halaman pertama kali dibuka untuk pengalaman pengguna yang lebih baik -->
  <div id="preloader" class="fixed inset-0 z-[100] flex items-center justify-center cta-gradient">
    <div class="spinner"></div>
  </div>

  <!-- ===== HEADER & NAVIGASI ===== -->
  <!-- Header tetap (fixed) di bagian atas halaman dengan navigasi -->
  <header id="header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 cta-gradient shadow-xl">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center">
      <!-- Logo Situs -->
      <a href="{{ '/' | relative_url }}">
        <img src="{{ '/assets/images/logo1.png' | relative_url }}" alt="Logo PKC PMII Bali Nusra" class="h-10 md:h-12">
      </a>
      <!-- Navigasi untuk Desktop -->
      <nav id="desktop-nav" class="hidden md:flex items-center space-x-6 lg:space-x-8">
        <a href="{{ '/' | relative_url }}" class="text-white text-sm font-semibold hover:text-yellow-300 transition-colors">Beranda</a>
        <a href="{{ '/tentang' | relative_url }}" class="text-white text-sm font-semibold hover:text-yellow-300 transition-colors">Tentang</a>
        <a href="{{ '/pengurus' | relative_url }}" class="text-white text-sm font-semibold hover:text-yellow-300 transition-colors">Pengurus</a>
        <a href="{{ '/rilis' | relative_url }}" class="text-white text-sm font-semibold hover:text-yellow-300 transition-colors">Rilis</a>
      </nav>
      <!-- Tombol Aksi (CTA) untuk Desktop -->
      <a href="{{ '/kartu' | relative_url }}" class="hidden md:block bg-[#FFCB05] text-black px-5 py-2.5 rounded-full font-bold text-sm shadow-md transition-all duration-300 hover:bg-yellow-400 hover:scale-105 hover:-translate-y-0.5">Kartu</a>
      <!-- Tombol Menu untuk Tampilan Mobile -->
      <button id="mobile-menu-button" class="md:hidden"><i data-lucide="menu" class="w-6 h-6 text-white"></i></button>
    </div>
    <!-- Menu Navigasi Mobile (tersembunyi secara default) -->
    <div id="mobile-menu" class="hidden md:hidden cta-gradient">
      <a href="{{ '/' | relative_url }}" class="block text-center py-3 px-6 text-white text-base hover:bg-white/10 transition-colors">Beranda</a>
      <a href="{{ '/tentang' | relative_url }}" class="block text-center py-3 px-6 text-white text-base hover:bg-white/10 transition-colors">Tentang</a>
      <a href="{{ '/pengurus' | relative_url }}" class="block text-center py-3 px-6 text-white text-base hover:bg-white/10 transition-colors">Pengurus</a>
      <a href="{{ '/rilis' | relative_url }}" class="block text-center py-3 px-6 text-white text-base hover:bg-white/10 transition-colors">Rilis</a>
      <div class="p-4"><a href="{{ '/kartu' | relative_url }}" class="block w-full text-center bg-[#FFCB05] text-black px-5 py-3 rounded-full font-bold text-base transition-transform hover:scale-105">Kartu</a></div>
    </div>
  </header>

  <!-- ===== KONTEN UTAMA ARTIKEL ===== -->
  <!-- `{{ content }}` akan diisi oleh konten dari file Markdown postingan Anda. -->
  <main class="pt-24 md:pt-28">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-20">
      <article class="max-w-4xl mx-auto">
        
        <!-- Header Artikel: Judul, Tanggal, Penulis -->
        <header class="mb-10 md:mb-12">
          <div class="flex justify-between items-center mb-4">
            <!-- Tombol untuk kembali ke halaman daftar rilis/blog -->
            <a href="{{ '/rilis' | relative_url }}" class="text-sm text-[#0973D6] hover:underline flex items-center gap-1">
              <i data-lucide="arrow-left" class="w-4 h-4"></i> Kembali
            </a>
            <!-- Tanggal publikasi, diambil dari front matter -->
            <p class="text-sm text-gray-500">{{ page.date | date: "%d %B %Y" }}</p>
          </div>
          <!-- Judul artikel, diambil dari front matter -->
          <h1 class="text-center text-3xl md:text-4xl lg:text-5xl font-extrabold text-gray-900 leading-tight md:leading-tight">{{ page.title }}</h1>
          <!-- Penulis artikel, hanya ditampilkan jika 'author' ada di front matter -->
          {% if page.author %}
            <div class="mt-4 flex items-center justify-center gap-2 text-base text-gray-600">
              <i data-lucide="user-circle-2" class="w-5 h-5"></i>
              <span class="font-semibold">{{ page.author }}</span>
            </div>
          {% endif %}
        </header>

        <!-- Gambar Utama Artikel (jika ada) -->
        {% if page.image %}
          <figure class="mb-8">
            <div class="overflow-hidden rounded-xl shadow-lg">
              <!-- Logika untuk menangani URL gambar eksternal dan path internal -->
              <img src="{% if page.image contains '://' %}{{ page.image }}{% else %}{{ '/' | append: page.image | relative_url }}{% endif %}" class="w-full h-auto object-cover" alt="{{ page.image_caption | default: page.title }}" loading="lazy">
            </div>
            <!-- Keterangan gambar, hanya ditampilkan jika 'image_caption' ada -->
            {% if page.image_caption %}
              <figcaption class="text-center text-xs sm:text-sm text-gray-500 mt-2">{{ page.image_caption }}</figcaption>
            {% endif %}
          </figure>
        {% endif %}

        <!-- Konten Artikel dari file Markdown -->
        <!-- Kelas 'prose' akan menerapkan gaya yang telah kita definisikan di <style> -->
        <div class="prose prose-sm sm:prose-base lg:prose-lg max-w-none leading-relaxed">
          {{ content }}
        </div>

        <!-- Penyemat Video YouTube (Opsional) -->
        <!-- Tampilkan video jika 'youtube_id' ada di front matter. Contoh: youtube_id: dQw4w9WgXcQ -->
        {% if page.youtube_id %}
          <div class="mt-12 lg:mt-16">
            <h3 class="text-xl font-bold text-center mb-6 text-gray-900">Tontonan Terkait</h3>
            <!-- Wrapper responsif untuk menjaga aspek rasio 16:9 -->
            <div class="relative overflow-hidden rounded-xl shadow-lg" style="padding-bottom: 56.25%;">
              <iframe class="absolute top-0 left-0 w-full h-full" src="https://www.youtube.com/embed/{{ page.youtube_id }}" title="Embedded YouTube video for {{ page.title }}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
          </div>
        {% endif %}

        <!-- Tombol Bagikan Artikel -->
        <div class="mt-12 lg:mt-16 pt-8 border-t">
          <h3 class="text-lg font-bold text-center mb-4 text-gray-900">Bagikan Rilis</h3>
          <div id="share-buttons-container" class="flex justify-center items-center gap-4 flex-wrap">
            <!-- Tombol akan dibuat dan dimasukkan oleh JavaScript -->
          </div>
        </div>
        
      </article>
    </div>
  </main>

  <!-- ===== FOOTER ===== -->
  <!-- Footer konsisten, berisi info kontak dan tautan -->
  <footer id="kontak" class="cta-gradient text-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24 text-center">
      <h2 class="text-2xl lg:text-3xl font-bold mb-4">Download Sekarang!</h2>
      <p class="text-base text-white/80 mb-8 max-w-3xl mx-auto">Aplikasi Mobile Permaisindo, Platform Aktivis Pergerakan.</p>
      <div class="mb-12 flex justify-center">
        <img src="{{ '/assets/images/apk.png' | relative_url }}" alt="Tangkapan layar aplikasi Permaisindo" class="h-auto max-h-[400px] md:max-h-[500px] rounded-2xl" loading="lazy">
      </div>
      <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
        <a href="{{ '/koleksi' | relative_url }}" class="bg-[#FFCB05] text-black px-8 py-3 rounded-full font-bold text-base shadow-lg w-full sm:w-auto transition-all duration-300 hover:bg-yellow-400 hover:scale-105 hover:-translate-y-0.5">Koleksi</a>
        <a href="https://play.google.com" target="_blank" rel="noopener noreferrer" class="bg-transparent border-2 border-[#FFCB05] text-[#FFCB05] px-8 py-3 rounded-full font-bold text-base w-full sm:w-auto transition-all duration-300 hover:bg-[#FFCB05] hover:text-black hover:scale-105 hover:-translate-y-0.5">Download Aplikasi</a>
      </div>
    </div>
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 pb-16">
      <div class="flex flex-col md:flex-row justify-between items-center text-center md:text-left gap-10">
        <div><h3 class="text-lg font-semibold text-white mb-4">Alamat</h3><p class="text-sm text-white/80 max-w-sm">Jl. Catur Warga No. 9A Kelurahan Pejanggik, Kecamatan Mataram Timur, Kota Mataram, Provinsi Nusa Tenggara Barat, Indonesia (83127).</p></div>
        <div><h3 class="text-lg font-semibold text-white mb-4">Media Sosial</h3><div class="flex justify-center md:justify-start space-x-4 mt-2"><a href="https://youtube.com/@pkcpmiibalinusra" target="_blank" rel="noopener noreferrer" class="text-gray-300 hover:text-white"><i data-lucide="youtube" class="w-5 h-5"></i></a><a href="https://facebook.com/pkcpmiibalinusatenggara" target="_blank" rel="noopener noreferrer" class="text-gray-300 hover:text-white"><i data-lucide="facebook" class="w-5 h-5"></i></a><a href="https://instagram.com/pkc.pmiibalinusra" target="_blank" rel="noopener noreferrer" class="text-gray-300 hover:text-white"><i data-lucide="instagram" class="w-5 h-5"></i></a></div></div>
      </div>
      <div class="mt-16 pt-8 border-t border-white/20 text-center text-white/60 text-sm"><p>&copy; <span id="year"></span> PKC PMII Bali Nusra.</p></div>
    </div>
  </footer>

  <!-- 
    ======================================================================
    JAVASCRIPT UTAMA
    ======================================================================
    Semua logika interaktif ditempatkan di akhir body untuk performa load yang lebih baik.
  -->
  <script>
    // Menjalankan semua skrip setelah seluruh konten halaman (DOM) dimuat
    document.addEventListener('DOMContentLoaded', function() {
      
      // --- Seleksi Elemen DOM yang Sering Digunakan ---
      const preloader = document.getElementById('preloader');
      const mobileMenuButton = document.getElementById('mobile-menu-button');
      const mobileMenu = document.getElementById('mobile-menu');
      const yearSpan = document.getElementById('year');
      const shareContainer = document.getElementById('share-buttons-container');

      // --- Logika UI Dasar (Preloader, Menu Mobile, Copyright) ---
      if (preloader) {
        setTimeout(() => {
          preloader.style.transition = "opacity .5s ease";
          preloader.style.opacity = "0";
          preloader.addEventListener("transitionend", () => preloader.style.display = "none");
        }, 500); // Tunda sedikit agar tidak terlalu cepat hilang
      }
      if (mobileMenuButton) {
        mobileMenuButton.addEventListener("click", () => mobileMenu.classList.toggle("hidden"));
      }
      if(yearSpan) {
        yearSpan.textContent = new Date().getFullYear();
      }
      
      // --- Fungsi Notifikasi Kustom ---
      // Menampilkan pesan pop-up singkat di pojok kanan bawah.
      function showNotification(message, type = "success") {
        const notification = document.createElement("div");
        const bgColor = type === "success" ? "bg-green-500" : "bg-red-600";
        notification.className = `fixed bottom-5 right-5 text-white text-sm py-3 px-5 rounded-lg shadow-xl z-[101] transition-all duration-300 transform translate-y-10 opacity-0 ${bgColor}`;
        notification.textContent = message;
        document.body.appendChild(notification);
        setTimeout(() => notification.classList.remove("translate-y-10", "opacity-0"), 10);
        setTimeout(() => {
          notification.classList.add("opacity-0");
          notification.addEventListener("transitionend", () => notification.remove());
        }, 3000);
      }

      // --- Fungsi Salin Link (Kompatibel) ---
      // Menyalin teks ke clipboard, dengan fallback untuk environment non-secure (seperti iframe).
      function copyToClipboard(text) {
        if (navigator.clipboard && window.isSecureContext) {
          navigator.clipboard.writeText(text).then(() => showNotification('Link berhasil disalin!'), () => showNotification('Gagal menyalin link.', 'error'));
        } else {
          const textArea = document.createElement("textarea");
          textArea.value = text;
          textArea.style.position = "fixed";
          textArea.style.left = "-9999px";
          document.body.appendChild(textArea);
          textArea.focus();
          textArea.select();
          try {
            document.execCommand('copy');
            showNotification('Link berhasil disalin!');
          } catch (err) {
            showNotification('Gagal menyalin link.', 'error');
          }
          document.body.removeChild(textArea);
        }
      }

      // --- Fungsi untuk Membuat Tombol Bagikan ---
      // Secara dinamis membuat tombol untuk WhatsApp, X (Twitter), Facebook, dan Salin Link.
      function createShareButtons(container, url, text) {
        if (!container) return; // Keluar jika kontainer tidak ditemukan
        const shareText = `Baca selengkapnya: "${text}"`;
        const platforms = [
          { name: "WhatsApp", icon: "message-circle", color: "bg-green-500", href: `https://api.whatsapp.com/send?text=${encodeURIComponent(shareText + " " + url)}` },
          { name: "X", icon: `<svg viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231L18.244 2.25zM17.5 19.5h1.5l-8.5-11.25h-1.6l8.6 11.25z"></path></svg>`, color: "bg-black", href: `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(shareText)}` },
          { name: "Facebook", icon: "facebook", color: "bg-blue-800", href: `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}` },
          { name: "Copy Link", icon: "link", color: "bg-gray-500", href: "#", action: 'copy' }
        ];
        
        platforms.forEach(p => {
            const button = document.createElement("a");
            button.href = p.href;
            button.className = `share-button ${p.color} text-white w-10 h-10 rounded-full flex items-center justify-center transition-transform hover:scale-110`;
            button.title = p.action === 'copy' ? 'Salin link' : `Bagikan ke ${p.name}`;
            button.innerHTML = typeof p.icon === 'string' && p.icon.startsWith('<svg') ? p.icon : `<i data-lucide="${p.icon}" class="w-5 h-5"></i>`;

            if (p.action === 'copy') {
                button.addEventListener("click", event => {
                    event.preventDefault(); // Mencegah navigasi ke '#'
                    copyToClipboard(url);
                });
            } else {
                button.target = "_blank";
                button.rel = "noopener noreferrer";
            }
            container.appendChild(button);
        });
      }

      // --- Inisialisasi Skrip ---
      // Buat tombol bagikan menggunakan data dari front matter Jekyll
      createShareButtons(shareContainer, '{{ page.url | absolute_url }}', '{{ page.title | escape }}');
      
      // Render semua ikon Lucide yang ada di halaman
      lucide.createIcons();
    });
  </script>
</body>
</html>
